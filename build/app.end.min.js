/*! 2016-10-13 */
function handleGlobalMessage(message){"returnData"===message.name?(console.log("data returned",message.message),app.start()):"returnSettings"===message.name}var app={};(function(){var that=app;this.start=function(){console.log("ive started");for(var nodeValue,documentTree=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);documentTree.nextNode();)nodeValue=documentTree.currentNode.nodeValue,documentTree.currentNode.nodeValue=that.replaceString(nodeValue,"Google","Yahoo");console.log("im done")},this.replaceString=function(context,find,replace){return context.replace(new RegExp(find,"gi"),replace)}}).apply(app),safari.self.addEventListener("message",handleGlobalMessage,!1),safari.self.tab.dispatchMessage("getData","Get JSON data for text replacements");