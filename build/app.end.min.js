/*! 2016-10-18 */
function handleGlobalMessage(message){"returnData"===message.name?endApp.start(message.message):"returnSettings"===message.name}var endApp={helpers:{}};(function(){var that=endApp;this.start=function(jsonData){for(var nodeValue,documentTree=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);documentTree.nextNode();)if(documentTree.currentNode.nodeType===Node.TEXT_NODE){nodeValue=documentTree.currentNode.nodeValue;for(var i=0;i<jsonData.length;i++)documentTree.currentNode.nodeValue=that.helpers.replaceString(nodeValue,jsonData[i].find,jsonData[i].replace)}}}).apply(endApp),safari.self.addEventListener("message",handleGlobalMessage,!1),safari.self.tab.dispatchMessage("getData","Get JSON data for text replacements"),function(){endApp.helpers;this.replaceString=function(context,find,replace){return context.replace(new RegExp(find,"gi"),replace)}}.apply(endApp.helpers);